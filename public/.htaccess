<IfModule mod_rewrite.c>
    RewriteEngine On

    # Thay đổi đường dẫn bên dưới đúng với thư mục dự án của bạn trên localhost
    RewriteBase /Web-Programming-Assignment-251-/public/
    
    # 1. Chặn truy cập trực tiếp file thật
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    
    # 2. Rule cho TIN TỨC (Khớp với link đã sửa ở home.php)
    RewriteRule ^tin-tuc/([a-zA-Z0-9-]+)$ index.php?url=news/detail&slug=$1 [QSA,L]

    # 3. Rule cho SẢN PHẨM
    # Trang DANH SÁCH SẢN PHẨM (Link: domain/san-pham)
    RewriteRule ^san-pham/?$ index.php?url=products/index [QSA,L]

    # Trang CHI TIẾT SẢN PHẨM (Link: domain/san-pham/ten-san-pham)
    # Dùng (.*) để chấp nhận cả tiếng Việt và ký tự đặc biệt
    RewriteRule ^san-pham/(.*)$ index.php?url=products/detail&slug=$1 [QSA,L]

    # 4. Rule cho DANH MỤC
    RewriteRule ^danh-muc/([a-zA-Z0-9-]+)$ index.php?url=products/category&slug=$1 [QSA,L]

    # 5. Mặc định
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.+)$ index.php?url=$1 [QSA,L]
</IfModule>